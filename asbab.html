<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Asbabun Nuzul Premium</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <style>
        /* --- 1. SHARED THEME VARIABLES --- */
        :root[data-theme="light"] { --primary:#A67734; --primary-light:#FDF8F0; --bg:#F8F9FA; --surface:#FFFFFF; --text:#1F2937; --text-muted:#6B7280; --border:#E5E7EB; --glass: rgba(255, 255, 255, 0.95); }
        :root[data-theme="dark"] { --primary:#D4AF37; --primary-light:#2A2012; --bg:#121212; --surface:#1E1E1E; --text:#F3F4F6; --text-muted:#9CA3AF; --border:#374151; --glass: rgba(18, 18, 18, 0.95); }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding-bottom: 80px; overflow-x: hidden; transition: background 0.3s; }

        /* --- 2. HEADER --- */
        .sticky-header { position: sticky; top: 0; z-index: 50; background: var(--glass); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); padding: 15px 20px 10px 20px; }
        .search-input { width: 100%; padding: 12px 12px 12px 40px; border-radius: 12px; border: 1px solid var(--border); background: var(--surface); color: var(--text); font-size: 14px; outline: none; transition: 0.2s; }
        .search-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-light); }
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-muted); width: 18px; }

        /* --- 3. LIST VIEW --- */
        .container { padding: 15px 20px; }
        .story-card { display: flex; align-items: center; padding: 16px; background: var(--surface); margin-bottom: 10px; border-radius: 16px; border: 1px solid var(--border); cursor: pointer; transition: transform 0.1s; }
        .story-card:active { transform: scale(0.98); background: var(--primary-light); }
        
        .surah-badge { width: 50px; height: 50px; border-radius: 14px; background: var(--primary-light); color: var(--primary); display: flex; flex-direction: column; align-items: center; justify-content: center; margin-right: 15px; flex-shrink: 0; border: 1px solid rgba(0,0,0,0.05); }
        .surah-badge span { font-size: 8px; opacity: 0.8; text-transform: uppercase; margin-bottom: 2px; }
        .surah-badge strong { font-size: 10px; font-weight: 800; text-align: center; line-height: 1.1; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }

        .story-info { flex: 1; min-width: 0; }
        .story-title { font-weight: 700; font-size: 14px; color: var(--text); margin-bottom: 4px; line-height: 1.2; }
        .story-preview { font-size: 11px; color: var(--text-muted); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.4; opacity: 0.8; }

        /* --- 4. FOCUS MODAL (SCROLLABLE) --- */
        .modal-overlay { position: fixed; inset: 0; z-index: 200; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); display: none; align-items: center; justify-content: center; padding: 20px; animation: fadeIn 0.3s ease; }
        .modal-overlay.open { display: flex; }

        .focus-card { width: 100%; max-width: 400px; background: var(--surface); border-radius: 24px; border: 1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.3); display: flex; flex-direction: column; max-height: 85vh; position: relative; transform: scale(0.9); opacity: 0; transition: all 0.3s; overflow: hidden; }
        .modal-overlay.open .focus-card { transform: scale(1); opacity: 1; }

        .focus-scroll-area { padding: 30px 25px; overflow-y: auto; flex: 1; text-align: center; scrollbar-width: none; }
        .focus-scroll-area::-webkit-scrollbar { display: none; }

        .focus-icon { width: 50px; height: 50px; border-radius: 16px; background: var(--primary); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 24px; margin: 0 auto 15px auto; }
        .focus-cat { font-size: 10px; text-transform: uppercase; letter-spacing: 2px; color: var(--text-muted); font-weight: 800; margin-bottom: 5px; }
        .focus-title { font-size: 18px; font-weight: 800; color: var(--text); margin-bottom: 20px; line-height: 1.3; }
        .focus-arabic { font-family: 'Amiri', serif; font-size: 24px; line-height: 2.2; color: var(--primary); margin-bottom: 10px; width: 100%; direction: rtl; background: var(--bg); padding: 10px; border-radius: 12px; border-left: 3px solid var(--primary); }
        .focus-verse-trans { font-size: 13px; font-style: italic; color: var(--text-muted); margin-bottom: 20px; line-height: 1.5; }
        .focus-story { font-size: 15px; color: var(--text); line-height: 1.7; margin-bottom: 25px; text-align: left; width: 100%; white-space: pre-wrap; font-family: 'Inter', sans-serif; }

        .screenshot-brand { display: none; margin-top: 20px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 15px; width: 100%; }
        .brand-flex { display: flex; justify-content: space-between; align-items: center; }
        .brand-name { font-size: 12px; font-weight: 800; color: var(--primary); letter-spacing: 1px; text-transform: uppercase; }

        .focus-actions { padding: 15px 25px; background: var(--surface); border-top: 1px solid var(--border); display: flex; gap: 10px; width: 100%; z-index: 10; }
        .btn-action { flex: 1; padding: 12px; border-radius: 12px; border: none; font-weight: 700; font-size: 13px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-primary { background: var(--text); color: var(--bg); }
        .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--text); }
        .btn-close { position: absolute; top: 15px; right: 15px; width: 32px; height: 32px; border-radius: 50%; background: var(--bg); border: none; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 20; }

        .spin { animation: spin 1s linear infinite; display: none; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="sticky-header">
        <div class="search-box" style="position:relative; margin-bottom: 5px;">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            <input type="text" id="searchInput" class="search-input" placeholder="Search Surah..." onkeyup="filterList()">
        </div>
    </div>

    <div class="container" id="listContainer"></div>

    <div id="detailModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="focus-card screenshot-target" onclick="event.stopPropagation()">
            <button class="btn-close" onclick="closeModal()">&times;</button>
            <div class="focus-scroll-area">
                <div class="focus-icon">ðŸ“œ</div>
                <div class="focus-cat" id="mVerse">SURAH : AYAH</div>
                <div class="focus-title" id="mTitle">Story Title</div>
                <div class="focus-arabic" id="mArab">...</div>
                <div class="focus-verse-trans" id="mTrans">...</div>
                <div class="focus-story" id="mStory">...</div>
                <div class="screenshot-brand">
                    <div class="brand-flex">
                        <div class="brand-name">MUKMIN.COM</div>
                        <div style="font-size:10px; opacity:0.7;">Asbabun Nuzul</div>
                    </div>
                </div>
            </div>
            <div class="focus-actions">
                <button class="btn-action btn-outline" id="btnPlay" onclick="toggleAudio()">
                    <span id="iconPlay">â–¶</span> <span>Audio</span>
                </button>
                <button class="btn-action btn-primary" id="btnShare" onclick="shareCard()">
                    <svg class="spin" id="shareSpin" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"></path></svg>
                    <svg id="shareIcon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
                    <span>Share</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- DATASET: 55 AUTHENTIC STORIES ---
        const ASBAB_DB = [
            // JUZ 30 & POPULAR
            { id: 1, surah: "Al-Fatihah", ayah: "1-7", arabic: "Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙŽÙ‘Ù‡Ù Ù±Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ù±Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù", verseTrans: { ms: "Dengan nama Allah...", en: "In the name of Allah..." }, title: { ms: "Wahyu Lengkap Pertama", en: "First Complete Revelation" }, story: { ms: "Malaikat Jibril mengajar Nabi SAW surah ini sebagai pembukaan Al-Quran.", en: "Angel Gabriel taught this Surah to the Prophet (SAW) as the opening of the Quran." } },
            { id: 2, surah: "Al-Alaq", ayah: "1-5", arabic: "Ø§Ù‚Ù’Ø±ÙŽØ£Ù’ Ø¨ÙØ§Ø³Ù’Ù…Ù Ø±ÙŽØ¨ÙÙ‘ÙƒÙŽ", verseTrans: { ms: "Bacalah dengan nama Tuhanmu...", en: "Read in the name of your Lord..." }, title: { ms: "Wahyu Pertama", en: "First Revelation" }, story: { ms: "Jibril memeluk Nabi di Gua Hira dan berkata 'Iqra!' (Baca!) sebanyak 3 kali.", en: "Jibril embraced the Prophet in Cave Hira saying 'Iqra!' (Read!) three times." } },
            { id: 3, surah: "Al-Muddathir", ayah: "1-2", arabic: "ÙŠÙŽØ§ Ø£ÙŽÙŠÙÙ‘Ù‡ÙŽØ§ Ø§Ù„Ù’Ù…ÙØ¯ÙŽÙ‘Ø«ÙÙ‘Ø±Ù", verseTrans: { ms: "Wahai orang berselimut...", en: "O you who covers himself..." }, title: { ms: "Perintah Dakwah", en: "Order to Preach" }, story: { ms: "Nabi pulang gementar dari Gua Hira minta diselimutkan. Turun ayat perintah berdakwah.", en: "Prophet returned trembling from Hira asking to be covered. Order to preach was revealed." } },
            { id: 4, surah: "Ad-Duha", ayah: "1-3", arabic: "Ù…ÙŽØ§ ÙˆÙŽØ¯ÙŽÙ‘Ø¹ÙŽÙƒÙŽ Ø±ÙŽØ¨ÙÙ‘ÙƒÙŽ ÙˆÙŽÙ…ÙŽØ§ Ù‚ÙŽÙ„ÙŽÙ‰Ù°", verseTrans: { ms: "Tuhanmu tidak meninggalkanmu...", en: "Your Lord has not forsaken you..." }, title: { ms: "Terhentinya Wahyu", en: "Pause in Revelation" }, story: { ms: "Wahyu terhenti lama. Wanita musyrik mengejek: 'Tuhan Muhammad telah meninggalkannya.' Nabi bersedih, lalu Allah menurunkan surah ini.", en: "Revelation paused. A polytheist woman mocked: 'Muhammad's Lord has left him.' The Prophet was sad, so Allah revealed this." } },
            { id: 5, surah: "Al-Ikhlas", ayah: "1-4", arabic: "Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø£ÙŽØ­ÙŽØ¯ÙŒ", verseTrans: { ms: "Katakanlah: Dia Allah, Yang Esa.", en: "Say: He is Allah, One." }, title: { ms: "Nasab Tuhan", en: "Lineage of God" }, story: { ms: "Musyrikin bertanya: 'Terangkan nasab Tuhanmu. Adakah dari emas atau perak?' Maka turunlah surah ini.", en: "Polytheists asked: 'Describe your Lord's lineage. Is He gold or silver?' Thus this Surah was revealed." } },
            { id: 6, surah: "Al-Falaq", ayah: "1-5", arabic: "Ù‚ÙÙ„Ù’ Ø£ÙŽØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’ÙÙŽÙ„ÙŽÙ‚Ù", verseTrans: { ms: "Aku berlindung kepada Tuhan subuh...", en: "I seek refuge in the Lord of dawn..." }, title: { ms: "Sihir Labid", en: "Magic of Labid" }, story: { ms: "Seorang Yahudi menyihir Nabi SAW menggunakan rambut baginda. Jibril memberitahu lokasi sihir itu.", en: "A Jew cast a spell on the Prophet (SAW). Jibril revealed the location to break the spell." } },
            { id: 7, surah: "Al-Kafirun", ayah: "1-6", arabic: "Ù‚ÙÙ„Ù’ ÙŠÙŽØ§ Ø£ÙŽÙŠÙÙ‘Ù‡ÙŽØ§ Ø§Ù„Ù’ÙƒÙŽØ§ÙÙØ±ÙÙˆÙ†ÙŽ", verseTrans: { ms: "Wahai orang kafir!", en: "O disbelievers!" }, title: { ms: "Tawaran Giliran Ibadah", en: "Worship Deal" }, story: { ms: "Quraisy menawarkan: 'Sembah tuhan kami setahun, kami sembah Tuhanmu setahun.' Surah ini menolak tawaran itu.", en: "Quraysh proposed: 'Worship our gods for a year, we worship yours for a year.' This Surah rejected it." } },
            { id: 8, surah: "Al-Kautsar", ayah: "1-3", arabic: "Ø¥ÙÙ†ÙŽÙ‘Ø§ Ø£ÙŽØ¹Ù’Ø·ÙŽÙŠÙ’Ù†ÙŽØ§ÙƒÙŽ Ø§Ù„Ù’ÙƒÙŽÙˆÙ’Ø«ÙŽØ±ÙŽ", verseTrans: { ms: "Kami memberimu Al-Kautsar...", en: "We gave you Al-Kautsar..." }, title: { ms: "Ejekan Terputus Keturunan", en: "Mockery of Lineage" }, story: { ms: "Apabila anak lelaki Nabi wafat, musyrik mengejek baginda 'abtar' (terputus). Allah menurunkan surah ini sebagai penghibur.", en: "When the Prophet's son died, they mocked him as 'cut off'. Allah revealed this as consolation." } },
            { id: 9, surah: "Al-Fil", ayah: "1-5", arabic: "Ø£ÙŽÙ„ÙŽÙ…Ù’ ØªÙŽØ±ÙŽ ÙƒÙŽÙŠÙ’ÙÙŽ ÙÙŽØ¹ÙŽÙ„ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙƒÙŽ", verseTrans: { ms: "Tidakkah engkau lihat...", en: "Have you not seen..." }, title: { ms: "Tentera Bergajah", en: "Elephant Army" }, story: { ms: "Kisah tentera Abrahah yang ingin meruntuhkan Kaabah tetapi dimusnahkan oleh burung Ababil.", en: "The story of Abrahah's army trying to destroy the Kaaba but destroyed by Ababil birds." } },
            { id: 10, surah: "Al-Masad", ayah: "1", arabic: "ØªÙŽØ¨ÙŽÙ‘ØªÙ’ ÙŠÙŽØ¯ÙŽØ§ Ø£ÙŽØ¨ÙÙŠ Ù„ÙŽÙ‡ÙŽØ¨Ù", verseTrans: { ms: "Binasalah tangan Abu Lahab...", en: "Perish the hands of Abu Lahab..." }, title: { ms: "Kutukan Abu Lahab", en: "Abu Lahab's Curse" }, story: { ms: "Di Bukit Safa, Abu Lahab menjerit kepada Nabi: 'Celakalah kamu! Adakah untuk ini kamu kumpulkan kami?'", en: "At Mount Safa, Abu Lahab shouted at the Prophet: 'May you perish! Is this why you gathered us?'" } },
            { id: 11, surah: "Abasa", ayah: "1", arabic: "Ø¹ÙŽØ¨ÙŽØ³ÙŽ ÙˆÙŽØªÙŽÙˆÙŽÙ„ÙŽÙ‘Ù‰Ù°", verseTrans: { ms: "Dia memasamkan muka...", en: "He frowned and turned..." }, title: { ms: "Teguran Si Buta", en: "The Blind Man" }, story: { ms: "Nabi berpaling daripada Abdullah Ummi Maktum (buta) kerana melayan pembesar Quraisy. Allah menegur baginda.", en: "The Prophet turned away from a blind man to speak to Quraysh leaders. Allah reprimanded him." } },
            { id: 12, surah: "Al-Ma'un", ayah: "1-3", arabic: "Ø£ÙŽØ±ÙŽØ£ÙŽÙŠÙ’ØªÙŽ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ ÙŠÙÙƒÙŽØ°ÙÙ‘Ø¨Ù Ø¨ÙØ§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù", verseTrans: { ms: "Tahukah pendusta agama?", en: "Have you seen the denier?" }, title: { ms: "Abu Sufyan Menghalau", en: "Abu Sufyan Repels" }, story: { ms: "Abu Sufyan menyembelih unta, anak yatim minta daging, dia halau dengan tongkat.", en: "Abu Sufyan slaughtered a camel, an orphan asked for meat, he drove him away with a stick." } },
            { id: 13, surah: "Al-Humazah", ayah: "1", arabic: "ÙˆÙŽÙŠÙ’Ù„ÙŒ Ù„ÙÙ‘ÙƒÙÙ„ÙÙ‘ Ù‡ÙÙ…ÙŽØ²ÙŽØ©Ù", verseTrans: { ms: "Celakalah pengumpat...", en: "Woe to every scorner..." }, title: { ms: "Ejekan Akhnas Syariq", en: "Mockery of Akhnas" }, story: { ms: "Akhnas bin Syariq selalu mengejek dan mengumpat Nabi bila bertemu.", en: "Akhnas bin Shariq used to mock and backbite the Prophet whenever they met." } },
            { id: 14, surah: "At-Takathur", ayah: "1", arabic: "Ø£ÙŽÙ„Ù’Ù‡ÙŽØ§ÙƒÙÙ…Ù Ø§Ù„ØªÙŽÙ‘ÙƒÙŽØ§Ø«ÙØ±Ù", verseTrans: { ms: "Kamu dilalaikan kemegahan...", en: "Competition diverts you..." }, title: { ms: "Bermegah Kabilah", en: "Boasting Tribes" }, story: { ms: "Dua kabilah Ansar saling berbangga harta dan keturunan sehingga mengira orang mati di kubur.", en: "Two tribes boasted of wealth/numbers until they counted the dead in graves." } },
            { id: 15, surah: "Al-Qadr", ayah: "1", arabic: "Ø¥ÙÙ†ÙŽÙ‘Ø§ Ø£ÙŽÙ†Ø²ÙŽÙ„Ù’Ù†ÙŽØ§Ù‡Ù ÙÙÙŠ Ù„ÙŽÙŠÙ’Ù„ÙŽØ©Ù Ø§Ù„Ù’Ù‚ÙŽØ¯Ù’Ø±Ù", verseTrans: { ms: "Kami turunkan di Lailatul Qadr...", en: "Sent it on Night of Decree..." }, title: { ms: "Pahala 1000 Bulan", en: "1000 Months Reward" }, story: { ms: "Sahabat rasa amalan mereka sedikit berbanding umat terdahulu yang hidup lama. Allah beri Lailatul Qadar.", en: "Companions felt their deeds were few compared to long-lived past nations. Allah gave Night of Decree." } },
            
            // KEY STORIES (BAQARAH, IMRAN, NISA)
            { id: 16, surah: "Al-Baqarah", ayah: "142", arabic: "Ø³ÙŽÙŠÙŽÙ‚ÙÙˆÙ„Ù Ø§Ù„Ø³ÙÙ‘ÙÙŽÙ‡ÙŽØ§Ø¡Ù...", verseTrans: { ms: "Orang bodoh bertanya...", en: "The foolish will ask..." }, title: { ms: "Pertukaran Kiblat", en: "Change of Qiblah" }, story: { ms: "Nabi sering menadah tangan ke langit memohon kiblat ditukar dari Baitul Maqdis ke Kaabah.", en: "The Prophet often looked to the sky hoping the Qiblah would change from Jerusalem to the Kaaba." } },
            { id: 17, surah: "Al-Baqarah", ayah: "189", arabic: "ÙŠÙŽØ³Ù’Ø£ÙŽÙ„ÙÙˆÙ†ÙŽÙƒÙŽ Ø¹ÙŽÙ†Ù Ø§Ù„Ù’Ø£ÙŽÙ‡ÙÙ„ÙŽÙ‘Ø©Ù", verseTrans: { ms: "Mereka tanya tentang anak bulan...", en: "They ask about new moons..." }, title: { ms: "Fungsi Bulan", en: "Phases of Moon" }, story: { ms: "Sahabat bertanya kenapa bulan bermula kecil, membesar, lalu mengecil? Jawabnya: Ia penentu waktu.", en: "Companions asked why the moon waxes and wanes. Answer: It is for measuring time." } },
            { id: 18, surah: "Al-Baqarah", ayah: "219", arabic: "ÙŠÙŽØ³Ù’Ø£ÙŽÙ„ÙÙˆÙ†ÙŽÙƒÙŽ Ø¹ÙŽÙ†Ù Ø§Ù„Ù’Ø®ÙŽÙ…Ù’Ø±Ù", verseTrans: { ms: "Mereka tanya arak...", en: "Ask about wine..." }, title: { ms: "Pertanyaan Arak", en: "Alcohol Question" }, story: { ms: "Umar dan sahabat minta penjelasan tentang arak. Ini peringkat awal sebelum haram mutlak.", en: "Umar asked for clarification on alcohol. This was an early stage before total ban." } },
            { id: 19, surah: "Ali Imran", ayah: "190", arabic: "Ø¥ÙÙ†ÙŽÙ‘ ÙÙÙŠ Ø®ÙŽÙ„Ù’Ù‚Ù Ø§Ù„Ø³ÙŽÙ‘Ù…ÙŽØ§ÙˆÙŽØ§ØªÙ", verseTrans: { ms: "Sesungguhnya dalam penciptaan langit...", en: "Indeed in creation of heavens..." }, title: { ms: "Tangisan Nabi", en: "Prophet's Tears" }, story: { ms: "Bilal melihat Nabi menangis solat malam. Nabi berkata: 'Celakalah orang yang membaca ayat ini tapi tidak berfikir.'", en: "Bilal saw the Prophet crying in prayer. The Prophet said: 'Woe to he who reads this and does not reflect.'" } },
            { id: 20, surah: "An-Nisa", ayah: "58", arabic: "Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ ÙŠÙŽØ£Ù’Ù…ÙØ±ÙÙƒÙÙ…Ù’ Ø£ÙŽÙ† ØªÙØ¤ÙŽØ¯ÙÙ‘ÙˆØ§ Ø§Ù„Ù’Ø£ÙŽÙ…ÙŽØ§Ù†ÙŽØ§ØªÙ", verseTrans: { ms: "Allah suruh tunai amanah...", en: "Allah commands trust..." }, title: { ms: "Kunci Kaabah", en: "Key of Kaaba" }, story: { ms: "Selepas Fathul Mekah, Nabi memulangkan kunci Kaabah kepada Uthman bin Talhah walaupun Ali r.a memintanya.", en: "After Mecca's conquest, the Prophet returned the Kaaba key to Uthman bin Talhah, despite Ali asking for it." } },
            
            // SOCIAL, LEGAL & PROPHETS
            { id: 21, surah: "Al-Maidah", ayah: "90", arabic: "Ø¥ÙÙ†ÙŽÙ‘Ù…ÙŽØ§ Ø§Ù„Ù’Ø®ÙŽÙ…Ù’Ø±Ù ÙˆÙŽØ§Ù„Ù’Ù…ÙŽÙŠÙ’Ø³ÙØ±Ù...", verseTrans: { ms: "Arak dan judi adalah kotor...", en: "Intoxicants and gambling are defilement..." }, title: { ms: "Haram Arak Mutlak", en: "Total Alcohol Ban" }, story: { ms: "Umar r.a berdoa agar Allah memberi penjelasan jelas tentang arak selepas insiden orang mabuk dalam solat.", en: "Umar prayed for a clear ruling on alcohol after incidents of drunkenness in prayer." } },
            { id: 22, surah: "An-Nur", ayah: "11", arabic: "Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø¬ÙŽØ§Ø¡ÙÙˆØ§ Ø¨ÙØ§Ù„Ù’Ø¥ÙÙÙ’ÙƒÙ", verseTrans: { ms: "Mereka yang membawa berita dusta...", en: "Those who brought the lie..." }, title: { ms: "Fitnah Aisyah", en: "Slander of Aisha" }, story: { ms: "Aisyah difitnah curang (Al-Ifk). Nabi sedih sehingga turun ayat ini membersihkan nama Aisyah.", en: "Aisha was falsely accused (Al-Ifk). The Prophet was grieved until this verse exonerated her." } },
            { id: 23, surah: "An-Nur", ayah: "30", arabic: "Ù‚ÙÙ„ Ù„ÙÙ‘Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†ÙŽ ÙŠÙŽØºÙØ¶ÙÙ‘ÙˆØ§", verseTrans: { ms: "Katakan pada lelaki tunduk pandangan...", en: "Tell men to lower gaze..." }, title: { ms: "Jaga Pandangan", en: "Lowering Gaze" }, story: { ms: "Seorang lelaki di Madinah berjalan sambil memandang wanita sehingga terlanggar tembok.", en: "A man in Madinah walked while staring at a woman until he hit a wall." } },
            { id: 24, surah: "Al-Hujurat", ayah: "1", arabic: "Ù„ÙŽØ§ ØªÙŽØ±Ù’ÙÙŽØ¹ÙÙˆØ§ Ø£ÙŽØµÙ’ÙˆÙŽØ§ØªÙŽÙƒÙÙ…Ù’", verseTrans: { ms: "Jangan tinggikan suara...", en: "Do not raise voices..." }, title: { ms: "Suara Tinggi", en: "Raised Voices" }, story: { ms: "Abu Bakr dan Umar berselisih suara di depan Nabi. Turun ayat menegur adab.", en: "Abu Bakr and Umar raised voices in front of the Prophet. This verse taught etiquette." } },
            { id: 25, surah: "Al-Hujurat", ayah: "6", arabic: "ÙŠÙŽØ§ Ø£ÙŽÙŠÙÙ‘Ù‡ÙŽØ§ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø¢Ù…ÙŽÙ†ÙÙˆØ§ Ø¥ÙÙ† Ø¬ÙŽØ§Ø¡ÙŽÙƒÙÙ…Ù’ ÙÙŽØ§Ø³ÙÙ‚ÙŒ", verseTrans: { ms: "Jika datang orang fasik...", en: "If a wicked person comes..." }, title: { ms: "Berita Palsu Walid", en: "Walid's Fake News" }, story: { ms: "Walid bin Uqbah lapor Bani Mustaliq murtad. Khalid al-Walid siasat, rupanya mereka sedang solat.", en: "Walid claimed Bani Mustaliq apostated. Khalid investigated and found them praying." } },
            { id: 26, surah: "Al-Hujurat", ayah: "12", arabic: "ÙˆÙŽÙ„ÙŽØ§ ÙŠÙŽØºÙ’ØªÙŽØ¨ Ø¨ÙŽÙ‘Ø¹Ù’Ø¶ÙÙƒÙÙ… Ø¨ÙŽØ¹Ù’Ø¶Ù‹Ø§", verseTrans: { ms: "Jangan mengumpat...", en: "Do not backbite..." }, title: { ms: "Mengumpat Sahabat", en: "Backbiting" }, story: { ms: "Dua orang sahabat mengumpat Salman al-Farisi kerana lambat masak. Allah samakan dengan makan daging saudara.", en: "Two companions backbit Salman regarding food. Allah likened it to eating brother's flesh." } },
            { id: 27, surah: "Al-Hujurat", ayah: "13", arabic: "Ø¥ÙÙ†ÙŽÙ‘ Ø£â€”ÙƒÙ’Ø±ÙŽÙ…ÙŽÙƒÙÙ…Ù’ Ø¹ÙÙ†Ø¯ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø£ÙŽØªÙ’Ù‚ÙŽØ§ÙƒÙÙ…Ù’", verseTrans: { ms: "Yang mulia adalah yang bertakwa...", en: "Most noble is most righteous..." }, title: { ms: "Kemuliaan Bilal", en: "Bilal's Honor" }, story: { ms: "Apabila Bilal azan di atas Kaabah, bangsawan mengejek. Allah membalas kemuliaan bukan pada keturunan.", en: "When Bilal called Azan on Kaaba, nobles mocked. Allah replied honor lies in piety." } },
            { id: 28, surah: "Yusuf", ayah: "3", arabic: "Ù†ÙŽØ­Ù’Ù†Ù Ù†ÙŽÙ‚ÙØµÙÙ‘ Ø¹ÙŽÙ„ÙŽÙŠÙ’ÙƒÙŽ", verseTrans: { ms: "Kami ceritakan kisah terbaik...", en: "We relate best stories..." }, title: { ms: "Pertanyaan Yahudi", en: "Jews' Question" }, story: { ms: "Yahudi menyuruh musyrikin tanya Nabi tentang kisah Yusuf pindah ke Mesir.", en: "Jews told polytheists to ask Prophet about Joseph moving to Egypt." } },
            { id: 29, surah: "Al-Kahfi", ayah: "23", arabic: "ÙˆÙŽÙ„ÙŽØ§ ØªÙŽÙ‚ÙÙˆÙ„ÙŽÙ†ÙŽÙ‘ Ù„ÙØ´ÙŽÙŠÙ’Ø¡Ù...", verseTrans: { ms: "Jangan kata 'Aku buat esok'...", en: "Don't say 'I'll do it tomorrow'..." }, title: { ms: "Lupa InshaAllah", en: "Forgot InshaAllah" }, story: { ms: "Nabi ditanya Ashabul Kahfi. Jawab 'Esok beritahu' tanpa InshaAllah. Wahyu henti 15 hari.", en: "Asked about Cave Sleepers, Prophet said 'Tomorrow' without InshaAllah. Revelation paused 15 days." } },
            { id: 30, surah: "Yasin", ayah: "78", arabic: "Ù…ÙŽÙ† ÙŠÙØ­Ù’ÙŠÙÙŠ Ø§Ù„Ù’Ø¹ÙØ¸ÙŽØ§Ù…ÙŽ", verseTrans: { ms: "Siapa hidupkan tulang reput?", en: "Who revives rotten bones?" }, title: { ms: "Tulang Reput", en: "Rotten Bone" }, story: { ms: "Ubayy bin Khalaf meramas tulang hancur depan Nabi tanya siapa boleh hidupkannya.", en: "Ubayy bin Khalaf crushed a bone asking Prophet who could possibly revive it." } },
            { id: 31, surah: "Al-Mujadilah", ayah: "1", arabic: "Ù‚ÙŽØ¯Ù’ Ø³ÙŽÙ…ÙØ¹ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù...", verseTrans: { ms: "Allah mendengar wanita...", en: "Allah heard the woman..." }, title: { ms: "Wanita Mengadu (Zihar)", en: "Woman's Plea" }, story: { ms: "Khaulah mengadu suaminya menyamakannya dengan ibunya (Zihar). Allah mendengar rayuannya.", en: "Khaulah complained her husband committed Zihar. Allah heard her plea." } },
            { id: 32, surah: "At-Tahrim", ayah: "1", arabic: "Ù„ÙÙ…ÙŽ ØªÙØ­ÙŽØ±ÙÙ‘Ù…Ù Ù…ÙŽØ§ Ø£ÙŽØ­ÙŽÙ„ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù", verseTrans: { ms: "Kenapa haramkan yang halal...", en: "Why forbid lawful..." }, title: { ms: "Peristiwa Madu", en: "Honey Incident" }, story: { ms: "Nabi mengharamkan madu ke atas dirinya demi menjaga hati isteri-isterinya.", en: "Prophet forbade honey for himself to please his wives." } },
            { id: 33, surah: "Al-Munafiqun", ayah: "8", arabic: "Ù„ÙŽÙŠÙØ®Ù’Ø±ÙØ¬ÙŽÙ†ÙŽÙ‘ Ø§Ù„Ù’Ø£ÙŽØ¹ÙŽØ²ÙÙ‘", verseTrans: { ms: "Yang mulia usir yang hina...", en: "Mightier expel humbler..." }, title: { ms: "Kata Abdullah Ubayy", en: "Abdullah Ubayy" }, story: { ms: "Ketua Munafik kata dia akan halau Nabi dari Madinah. Allah bongkar kata-katanya.", en: "Hypocrite Leader said he'd expel Prophet. Allah exposed his words." } },
            { id: 34, surah: "At-Takathur", ayah: "1", arabic: "Ø£ÙŽÙ„Ù’Ù‡ÙŽØ§ÙƒÙÙ…Ù Ø§Ù„ØªÙŽÙ‘ÙƒÙŽØ§Ø«ÙØ±Ù", verseTrans: { ms: "Kamu dilalaikan kemegahan...", en: "Competition diverts..." }, title: { ms: "Bermegah Kabilah", en: "Boasting Tribes" }, story: { ms: "Dua kabilah Ansar saling berbangga harta hingga kira orang mati di kubur.", en: "Two tribes boasted of wealth/numbers until they counted dead in graves." } },
            { id: 35, surah: "Al-Layl", ayah: "1", arabic: "ÙˆÙŽØ§Ù„Ù„ÙŽÙ‘ÙŠÙ’Ù„Ù Ø¥ÙØ°ÙŽØ§ ÙŠÙŽØºÙ’Ø´ÙŽÙ‰Ù°", verseTrans: { ms: "Demi malam...", en: "By the night..." }, title: { ms: "Pembebasan Bilal", en: "Freeing Bilal" }, story: { ms: "Abu Bakr membebaskan Bilal. Musyrikin kata dia buat sebab terhutang budi. Ayat ini menafikannya.", en: "Abu Bakr freed Bilal. Polytheists claimed he owed a favor. Verse denied it." } },
            { id: 36, surah: "At-Taubah", ayah: "40", arabic: "Ø¥ÙØ°Ù’ ÙŠÙŽÙ‚ÙÙˆÙ„Ù Ù„ÙØµÙŽØ§Ø­ÙØ¨ÙÙ‡Ù", verseTrans: { ms: "Jangan bersedih...", en: "Do not grieve..." }, title: { ms: "Gua Thawr", en: "Cave of Thawr" }, story: { ms: "Di Gua Thawr, Abu Bakr takut musuh nampak. Nabi memujuknya 'Allah bersama kita'.", en: "In Cave Thawr, Abu Bakr feared discovery. Prophet said 'Allah is with us'." } },
            { id: 37, surah: "Al-Ahzab", ayah: "37", arabic: "ÙÙŽÙ„ÙŽÙ…ÙŽÙ‘Ø§ Ù‚ÙŽØ¶ÙŽÙ‰Ù° Ø²ÙŽÙŠÙ’Ø¯ÙŒ", verseTrans: { ms: "Bila Zaid selesaikan hajat...", en: "When Zaid concluded..." }, title: { ms: "Perkahwinan Zainab", en: "Zainab's Marriage" }, story: { ms: "Allah memerintahkan Nabi berkahwin dengan Zainab (bekas isteri anak angkat) untuk batal hukum anak angkat.", en: "Allah ordered Prophet to marry Zainab (ex-wife of adopted son) to annul adoption taboos." } },
            { id: 38, surah: "Al-Ahzab", ayah: "56", arabic: "Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙŽ ÙˆÙŽÙ…ÙŽÙ„ÙŽØ§Ø¦ÙÙƒÙŽØªÙŽÙ‡Ù", verseTrans: { ms: "Allah berselawat...", en: "Allah sends blessings..." }, title: { ms: "Perintah Selawat", en: "Order of Salawat" }, story: { ms: "Sahabat tanya cara berselawat. Turun ayat ini dan Nabi ajar Selawat Ibrahimiyah.", en: "Companions asked how to bless Prophet. This verse revealed, Prophet taught Ibrahimiyah." } },
            { id: 39, surah: "Al-Isra", ayah: "85", arabic: "ÙˆÙŽÙŠÙŽØ³Ù’Ø£ÙŽÙ„ÙÙˆÙ†ÙŽÙƒÙŽ Ø¹ÙŽÙ†Ù Ø§Ù„Ø±ÙÙ‘ÙˆØ­Ù", verseTrans: { ms: "Mereka tanya tentang Roh...", en: "They ask about Soul..." }, title: { ms: "Rahsia Roh", en: "Mystery of Soul" }, story: { ms: "Yahudi tanya Nabi tentang Roh. Jawapan: 'Roh urusan Tuhanku'.", en: "Jews asked Prophet about Soul. Answer: 'Soul is my Lord's affair'." } },
            { id: 40, surah: "At-Taubah", ayah: "113", arabic: "Ù…ÙŽØ§ ÙƒÙŽØ§Ù†ÙŽ Ù„ÙÙ„Ù†ÙŽÙ‘Ø¨ÙÙŠÙÙ‘...", verseTrans: { ms: "Tidak patut Nabi minta ampun...", en: "Prophet shouldn't ask forgiveness..." }, title: { ms: "Abu Talib", en: "Abu Talib" }, story: { ms: "Nabi mahu minta ampun untuk Abu Talib yang mati kafir. Allah melarangnya.", en: "Prophet wanted to ask forgiveness for Abu Talib who died disbeliever. Allah forbade it." } },
            { id: 41, surah: "Al-Hasyr", ayah: "9", arabic: "ÙˆÙŽÙŠÙØ¤Ù’Ø«ÙØ±ÙÙˆÙ†ÙŽ Ø¹ÙŽÙ„ÙŽÙ‰Ù° Ø£ÙŽÙ†ÙÙØ³ÙÙ‡ÙÙ…Ù’", verseTrans: { ms: "Mereka mengutamakan orang lain...", en: "They prefer others..." }, title: { ms: "Pemurah Ansar", en: "Ansar Altruism" }, story: { ms: "Keluarga Ansar padam lampu, pura-pura makan supaya tetamu kenyang.", en: "Ansar family dimmed lights, pretended to eat so guest could eat full." } },
            { id: 42, surah: "Al-Mumtahanah", ayah: "1", arabic: "Ù„ÙŽØ§ ØªÙŽØªÙŽÙ‘Ø®ÙØ°ÙÙˆØ§ Ø¹ÙŽØ¯ÙÙˆÙÙ‘ÙŠ...", verseTrans: { ms: "Jangan jadikan musuh-Ku teman...", en: "Don't take My enemy as friend..." }, title: { ms: "Surat Hatib", en: "Hatib's Letter" }, story: { ms: "Hatib hantar surat rahsia ke Mekah tentang rancangan Nabi. Allah bongkar.", en: "Hatib sent secret letter to Mecca about Prophet's plan. Allah revealed it." } },
            { id: 43, surah: "As-Saff", ayah: "2", arabic: "Ù„ÙÙ…ÙŽ ØªÙŽÙ‚ÙÙˆÙ„ÙÙˆÙ†ÙŽ Ù…ÙŽØ§ Ù„ÙŽØ§ ØªÙŽÙÙ’Ø¹ÙŽÙ„ÙÙˆÙ†ÙŽ", verseTrans: { ms: "Kenapa cakap tak buat...", en: "Why say what you don't do..." }, title: { ms: "Cakap Tak Serupa Bikin", en: "Empty Words" }, story: { ms: "Ada orang kata 'Kalau kami tahu amalan paling disukai, kami buat'. Bila diperintah Jihad, mereka benci.", en: "People said 'If we knew best deed we'd do it'. When Jihad ordered, they disliked it." } },
            { id: 44, surah: "Al-Qalam", ayah: "4", arabic: "ÙˆÙŽØ¥ÙÙ†ÙŽÙ‘ÙƒÙŽ Ù„ÙŽØ¹ÙŽÙ„ÙŽÙ‰Ù° Ø®ÙÙ„ÙÙ‚Ù Ø¹ÙŽØ¸ÙÙŠÙ…Ù", verseTrans: { ms: "Engkau berakhlak agung...", en: "You are of great character..." }, title: { ms: "Akhlak Nabi", en: "Prophet's Character" }, story: { ms: "Musyrikin tuduh Nabi gila. Allah jawab dengan memuji akhlak baginda.", en: "Polytheists called Prophet mad. Allah replied by praising his character." } },
            { id: 45, surah: "Al-Balad", ayah: "1", arabic: "Ù„ÙŽØ§ Ø£ÙÙ‚Ù’Ø³ÙÙ…Ù Ø¨ÙÙ‡ÙŽÙ°Ø°ÙŽØ§ Ø§Ù„Ù’Ø¨ÙŽÙ„ÙŽØ¯Ù", verseTrans: { ms: "Aku bersumpah dengan negeri ini...", en: "I swear by this city..." }, title: { ms: "Mekah", en: "Makkah" }, story: { ms: "Allah memuliakan Mekah tempat kelahiran Nabi dan tempat baginda dihalalkan berjuang.", en: "Allah honored Makkah, Prophet's birth place and where he was allowed to fight." } },
            { id: 46, surah: "An-Nisa", ayah: "105", arabic: "Ù„ÙØªÙŽØ­Ù’ÙƒÙÙ…ÙŽ Ø¨ÙŽÙŠÙ’Ù†ÙŽ Ø§Ù„Ù†ÙŽÙ‘Ø§Ø³Ù", verseTrans: { ms: "Hukum antara manusia...", en: "Judge between people..." }, title: { ms: "Pencuri Perisai", en: "Shield Thief" }, story: { ms: "Seorang Ansar mencuri perisai dan tuduh Yahudi. Nabi hampir percaya Ansar, tapi Allah dedah kebenaran.", en: "Ansar stole shield, framed a Jew. Prophet almost believed Ansar, Allah exposed truth." } },
            { id: 47, surah: "Al-Anfal", ayah: "1", arabic: "ÙŠÙŽØ³Ù’Ø£ÙŽÙ„ÙÙˆÙ†ÙŽÙƒÙŽ Ø¹ÙŽÙ†Ù Ø§Ù„Ù’Ø£ÙŽÙ†ÙÙŽØ§Ù„Ù", verseTrans: { ms: "Mereka tanya harta rampasan...", en: "They ask about spoils..." }, title: { ms: "Harta Badar", en: "Badr Spoils" }, story: { ms: "Selepas Perang Badar, sahabat berselisih tentang pembahagian harta. Allah ambil alih pembahagian.", en: "After Badr, companions argued over spoils. Allah took over distribution." } },
            { id: 48, surah: "Al-Mutaffifin", ayah: "1", arabic: "ÙˆÙŽÙŠÙ’Ù„ÙŒ Ù„ÙÙ‘Ù„Ù’Ù…ÙØ·ÙŽÙÙÙ‘ÙÙÙŠÙ†ÙŽ", verseTrans: { ms: "Celaka penipu timbangan...", en: "Woe to cheaters..." }, title: { ms: "Penipu Timbangan", en: "Weighing Fraud" }, story: { ms: "Penduduk Madinah suka curang dalam timbangan. Ayat ini turun, mereka terus berubah jujur.", en: "Madinah people cheated in weights. Verse revealed, they became honest." } },
            { id: 49, surah: "At-Taghabun", ayah: "14", arabic: "Ø¥ÙÙ†ÙŽÙ‘ Ù…ÙÙ†Ù’ Ø£ÙŽØ²Ù’ÙˆÙŽØ§Ø¬ÙÙƒÙÙ…Ù’...", verseTrans: { ms: "Isteri anak jadi musuh...", en: "Wives children enemies..." }, title: { ms: "Halangan Keluarga", en: "Family Obstacles" }, story: { ms: "Ada lelaki nak berhijrah tapi dihalang isteri dan anak menangis. Dia tak jadi pergi.", en: "Men wanted to migrate but wives/children cried stopping them. They stayed." } },
            { id: 50, surah: "Al-Insyirah", ayah: "1", arabic: "Ø£ÙŽÙ„ÙŽÙ…Ù’ Ù†ÙŽØ´Ù’Ø±ÙŽØ­Ù’ Ù„ÙŽÙƒÙŽ ØµÙŽØ¯Ù’Ø±ÙŽÙƒÙŽ", verseTrans: { ms: "Bukankah Kami lapangkan...", en: "Did We not expand..." }, title: { ms: "Pujuk Nabi", en: "Comforting Prophet" }, story: { ms: "Musyrikin mengejek kemiskinan Nabi. Allah turunkan surah ini janji kesenangan selepas kesusahan.", en: "Polytheists mocked Prophet's poverty. Allah revealed this promising ease after hardship." } },
            { id: 51, surah: "At-Tin", ayah: "4", arabic: "Ù„ÙŽÙ‚ÙŽØ¯Ù’ Ø®ÙŽÙ„ÙŽÙ‚Ù’Ù†ÙŽØ§ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙŽØ§Ù†ÙŽ", verseTrans: { ms: "Kami cipta manusia...", en: "Created man..." }, title: { ms: "Kejadian Sempurna", en: "Perfect Creation" }, story: { ms: "Menolak anggapan musyrik bahawa manusia tiada tujuan. Allah cipta sebaik-baik kejadian.", en: "Rejecting polytheist view man has no purpose. Allah created in best stature." } },
            { id: 52, surah: "Al-Bayyinah", ayah: "1", arabic: "Ù„ÙŽÙ…Ù’ ÙŠÙŽÙƒÙÙ†Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ ÙƒÙŽÙÙŽØ±ÙÙˆØ§", verseTrans: { ms: "Orang kafir tidak akan...", en: "Disbelievers would not..." }, title: { ms: "Menanti Bukti", en: "Waiting for Proof" }, story: { ms: "Ahli Kitab janji akan iman bila Nabi akhir zaman datang. Bila datang, mereka ingkar.", en: "People of Book promised to believe when Prophet comes. When he came, they denied." } },
            { id: 53, surah: "Az-Zalzalah", ayah: "7", arabic: "ÙÙŽÙ…ÙŽÙ† ÙŠÙŽØ¹Ù’Ù…ÙŽÙ„Ù’ Ù…ÙØ«Ù’Ù‚ÙŽØ§Ù„ÙŽ Ø°ÙŽØ±ÙŽÙ‘Ø©Ù", verseTrans: { ms: "Sebesar zarah...", en: "Atom's weight..." }, title: { ms: "Sedekah Kecil", en: "Small Charity" }, story: { ms: "Orang rasa dosa kecil tak apa, pahala kecil tak guna. Ayat ini kata semua dikira.", en: "People thought small sins okay, small deeds useless. Verse says all count." } },
            { id: 54, surah: "Al-Qari'ah", ayah: "1", arabic: "Ø§Ù„Ù’Ù‚ÙŽØ§Ø±ÙØ¹ÙŽØ©Ù", verseTrans: { ms: "Hari Kiamat...", en: "The Calamity..." }, title: { ms: "Dahsyat Kiamat", en: "Horror of Judgment" }, story: { ms: "Peringatan tentang hari di mana manusia seperti kelkatu dan gunung seperti bulu.", en: "Warning of day when people are like moths and mountains like wool." } },
            { id: 55, surah: "Al-Adiyat", ayah: "1", arabic: "ÙˆÙŽØ§Ù„Ù’Ø¹ÙŽØ§Ø¯ÙÙŠÙŽØ§ØªÙ Ø¶ÙŽØ¨Ù’Ø­Ù‹Ø§", verseTrans: { ms: "Demi kuda perang...", en: "By the racers..." }, title: { ms: "Kuda Perang", en: "War Horses" }, story: { ms: "Pasukan perang Nabi lambat pulang, munafik kata dah mati. Allah bersumpah dengan kuda mereka.", en: "Prophet's expedition late returning, hypocrites said dead. Allah swore by their horses." } }
        ];

        // --- STATE & INIT ---
        let lang = localStorage.getItem('wsl_lang') || 'en';
        let currentId = null;
        let synth = window.speechSynthesis;

        document.addEventListener('DOMContentLoaded', () => {
            syncTheme();
            renderList();
            updateTexts();
        });

        window.addEventListener('storage', (e) => {
            if(e.key === 'wsl_theme') syncTheme();
            if(e.key === 'wsl_lang') { lang = e.newValue; updateTexts(); renderList(); if(currentId) openModal(currentId); }
        });

        function syncTheme() {
            const t = localStorage.getItem('wsl_theme') || 'light';
            document.documentElement.setAttribute('data-theme', t);
        }

        function updateTexts() {
            document.getElementById('searchInput').placeholder = lang === 'ms' ? "Cari Surah..." : "Search Surah...";
        }

        // --- RENDER LIST ---
        window.filterList = renderList; 
        function renderList() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const listDiv = document.getElementById('listContainer');
            
            const filtered = ASBAB_DB.filter(d => {
                const title = lang === 'ms' ? d.title.ms : d.title.en;
                return title.toLowerCase().includes(q) || d.surah.toLowerCase().includes(q);
            });

            if(filtered.length === 0) {
                listDiv.innerHTML = `<div style="text-align:center; padding:30px; color:var(--text-muted); font-style:italic;">Nothing found.</div>`;
                return;
            }

            listDiv.innerHTML = filtered.map(d => {
                const title = lang === 'ms' ? d.title.ms : d.title.en;
                const prev = lang === 'ms' ? d.story.ms : d.story.en;
                
                return `
                <div class="story-card" onclick="openModal(${d.id})">
                    <div class="surah-badge">
                        <span>SURAH</span>
                        <strong>${d.surah.split(' ')[0]}</strong>
                    </div>
                    <div class="story-info">
                        <div class="story-title">${title}</div>
                        <div class="story-preview">${prev}</div>
                    </div>
                    <div style="color:var(--text-muted); opacity:0.5;">â€º</div>
                </div>`;
            }).join('');
        }

        // --- MODAL LOGIC ---
        window.openModal = (id) => {
            const d = ASBAB_DB.find(x => x.id === id);
            if(!d) return;
            currentId = id;
            
            document.getElementById('mVerse').textContent = `${d.surah} : ${d.ayah}`;
            document.getElementById('mTitle').textContent = lang === 'ms' ? d.title.ms : d.title.en;
            document.getElementById('mArab').textContent = d.arabic;
            document.getElementById('mTrans').textContent = `"${lang === 'ms' ? d.verseTrans.ms : d.verseTrans.en}"`;
            document.getElementById('mStory').textContent = lang === 'ms' ? d.story.ms : d.story.en;
            
            resetAudioBtn();
            document.getElementById('detailModal').classList.add('open');
        }

        window.closeModal = (e) => {
            if(e && e.target.id !== 'detailModal' && !e.target.classList.contains('btn-close')) return;
            document.getElementById('detailModal').classList.remove('open');
            if(synth.speaking) synth.cancel();
        }

        // --- AUDIO ---
        window.toggleAudio = () => {
            const d = ASBAB_DB.find(x => x.id === currentId);
            const btn = document.getElementById('btnPlay');
            
            if(synth.speaking) {
                synth.cancel();
                resetAudioBtn();
            } else {
                btn.style.borderColor = "var(--primary)";
                btn.style.color = "var(--primary)";
                document.getElementById('iconPlay').textContent = "||";
                
                const u = new SpeechSynthesisUtterance(d.arabic);
                u.lang = 'ar-SA';
                u.rate = 0.8;
                u.onend = resetAudioBtn;
                synth.speak(u);
            }
        }

        function resetAudioBtn() {
            const btn = document.getElementById('btnPlay');
            btn.style.borderColor = "var(--border)";
            btn.style.color = "var(--text)";
            document.getElementById('iconPlay').textContent = "â–¶";
        }

        // --- SCREENSHOT & SHARE (Robust Fix + Opacity + Scrolling) ---
        window.shareCard = async function() {
            const btn = document.getElementById('btnShare');
            const spin = document.getElementById('shareSpin');
            const icon = document.getElementById('shareIcon');
            const card = document.querySelector('.screenshot-target');

            if(spin) spin.style.display = 'block'; 
            if(icon) icon.style.display = 'none'; 
            if(btn) btn.style.opacity = '0.7';

            try {
                const wrapper = document.createElement('div');
                const scrollY = window.scrollY;

                Object.assign(wrapper.style, {
                    position: 'absolute', top: scrollY + 'px', left: '0', width: '100%', height: '100vh', 
                    zIndex: '10000', background: 'linear-gradient(135deg, var(--primary-light) 0%, var(--surface) 100%)',
                    display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center',
                    fontFamily: "'Inter', sans-serif"
                });

                const clone = card.cloneNode(true);
                clone.style.transform = 'scale(1)'; 
                clone.style.margin = '0'; 
                clone.style.opacity = '1'; 
                clone.style.boxShadow = '0 30px 60px rgba(0,0,0,0.15)';
                clone.style.maxHeight = 'none'; 
                
                const scrollArea = clone.querySelector('.focus-scroll-area');
                if(scrollArea) { scrollArea.style.overflow = 'visible'; scrollArea.style.height = 'auto'; }
                
                clone.querySelector('.btn-close').style.display = 'none';
                clone.querySelector('.focus-actions').style.display = 'none';
                clone.querySelector('.screenshot-brand').style.display = 'block';
                
                const loadingText = document.createElement('div');
                loadingText.innerText = "Generating Image...";
                loadingText.style.cssText = "position:absolute; bottom:50px; font-weight:bold; color:var(--primary); font-size:14px;";
                wrapper.appendChild(loadingText);

                wrapper.appendChild(clone);
                document.body.appendChild(wrapper);

                await new Promise(resolve => setTimeout(resolve, 300));

                const canvas = await html2canvas(wrapper, { 
                    scale: 2, useCORS: true, backgroundColor: null,
                    scrollX: 0, scrollY: -scrollY,
                    windowWidth: document.documentElement.offsetWidth,
                    windowHeight: document.documentElement.offsetHeight
                });
                
                document.body.removeChild(wrapper);

                canvas.toBlob(async (blob) => {
                    const file = new File([blob], "mukmin_asbab.png", { type: "image/png" });
                    if (navigator.canShare && navigator.canShare({ files: [file] })) {
                        try { await navigator.share({ files: [file] }); } catch(e) {}
                    } else {
                        const link = document.createElement('a');
                        link.download = 'mukmin_asbab.png';
                        link.href = canvas.toDataURL();
                        link.click();
                    }
                    if(spin) spin.style.display = 'none'; 
                    if(icon) icon.style.display = 'block'; 
                    if(btn) btn.style.opacity = '1';
                });

            } catch (e) {
                console.error(e);
                alert("Error generating image.");
                if(spin) spin.style.display = 'none'; 
                if(icon) icon.style.display = 'block'; 
                if(btn) btn.style.opacity = '1';
                const w = document.querySelector('div[style*="z-index: 10000"]');
                if(w) document.body.removeChild(w);
            }
        }
    </script>
</body>
</html>
